pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- main

function _init()
 p_reset()
end

function _update()
 p_count()
end

function _draw()
 cls(0)
 
 local mid=128/2
	local mx=15 
	
 circfill(mid,mid,(mid-1)/6*5,12)
	
	spr(0,mid-3*8-mx+_p[1].sx,50+_p[1].sy,3,4)
	spr(3,mid+mx    +_p[2].sx,50+_p[2].sy,3,4)
	
	line(mid,0,mid,128,0)
	
	
 smf_logo()
 ma_logo()
 

	local py=90
 
 local p1x=#tostr(_p[1].c)*2
 print(_p[1].c,mid-3*8/2-mx-p1x+2,py,15)
 
 local p2x=#tostr(_p[2].c)*2
 print(_p[2].c,mid+3*8/2+mx-p2x,py,15)

end
-->8
-- helper

function smf_logo()
 local l1,l2="salrburg","maker faire"
 local w,h=#l2*4+2,14
 local x,y=0,0
 
 rectfill(x,y,x+w+1,y+h+1,0)
	rect(x,y+6,x+w,y+h,12)
	print(l1,x,y,12)
 print(l2,x+2,y+2+6,8)
end

function ma_logo()
	local l1,l2="maker","austria"
	local w,h=#l2*4,12
	local x,y=127-w,1
	
	rectfill(x-1,y,x+w+1,y+h+1,0)
	rectfill(x,y,x+w,y+h,7)
	print(l1,x+1+4,y+1,8)
	print(l2,x+1,y+7,12)
end
-->8
function p_reset()
	_p={{c=0,b=nil,si=0,sx=0,sy=0},{c=0,b=nil,si=0,sx=0,sy=0}}
end

function p_count()
 local s={_p[1].b,_p[2].b} -- {-1,-1}
 
 for p=0,1 do
 	for b=0,5 do
  	if btn(b,p) then
  	 s[p+1]=b
  	 break
  	end
 	end
 end
 
 for i,v in pairs(s) do
  if _p[i].b!=v then
   _p[i].c+=1
   _p[i].si+=4 --change for intensity
   _p[i].b=v
  end
  
  -- shake!
  if _p[i].si > 0 then
   _p[i].sx=rnd(_p[i].si)-(_p[i].si/2)
   _p[i].sy=rnd(_p[i].si)-(_p[i].si/2)
		 _p[i].si*=.9
		 if _p[i].si < .3 then
		  _p[i].si=0
		 end
  end 
  
   
 end
end
__gfx__
00000066666666666666600000006666666666666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000006666666666666000000000666666666666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000077777777777777700000003333333333333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777888887777770000033333377777333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777788777778877770000033337777777773333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777877777777787770000033377778887777333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000778777777777778770000033777788088777733000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000778777777777778770000033766788088766733000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000787777777788777870000037777788888777773000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000787777778888777870000037777778887777773000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000787777888888777870000037777777777777773000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000787788888888777870000037776666666667773000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000787788888888777870000037776666666667773000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000778777777777778770000033777766666777733000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000778777777777778770000033777766666777733000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777877777777787770000033377777777777333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777788777778877770000033337777777773333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777888887777770000033333377777333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777777777777777770000033333333333333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000077777777777777700000003333333333333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007777777777777000000000333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000
